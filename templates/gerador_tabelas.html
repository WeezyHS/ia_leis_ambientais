<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Tabelas - Pl√™iade Ambiental</title>
    <link rel="stylesheet" href="/static/css/gerador_tabelas.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app-container" data-theme="dark">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h3>üåø Pl√™iade Ambiental</h3>
            </div>
            
            <div class="theme-toggle">
                <label class="toggle-switch">
                    <input type="checkbox" id="themeToggle" checked>
                    <span class="slider"></span>
                </label>
                <span class="theme-label">Modo Escuro</span>
            </div>
            
            <div class="sidebar-section">
                <h4>üìä Fontes de Dados</h4>
                <div class="data-source">
                    <div class="source-item">
                        <span class="source-icon">üèõÔ∏è</span>
                        <div class="source-info">
                            <div class="source-name">Leis Federais</div>
                            <div class="source-count" id="federalCount">-</div>
                        </div>
                    </div>
                    <div class="source-item">
                        <span class="source-icon">üè¢</span>
                        <div class="source-info">
                            <div class="source-name">Leis Estaduais</div>
                            <div class="source-count" id="estadualCount">-</div>
                        </div>
                    </div>
                    <div class="source-item">
                        <span class="source-icon">üèòÔ∏è</span>
                        <div class="source-info">
                            <div class="source-name">Leis Municipais</div>
                            <div class="source-count" id="municipalCount">-</div>
                        </div>
                    </div>
                    <div class="source-item total">
                        <span class="source-icon">üìö</span>
                        <div class="source-info">
                            <div class="source-name">Total de Fontes</div>
                            <div class="source-count" id="totalCount">-</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="sidebar-section">
                <h4>üìã Fontes Dispon√≠veis</h4>
                <div class="sources-list">
                    <div class="source-tag">CONAMA</div>
                    <div class="source-tag">IBAMA</div>
                    <div class="source-tag">MMA</div>
                    <div class="source-tag">SNUC</div>
                    <div class="source-tag">Lei 6.938/81</div>
                    <div class="source-tag">Lei 9.605/98</div>
                    <div class="source-tag">Lei 12.651/12</div>
                    <div class="source-tag">Decreto 6.514/08</div>
                </div>
            </div>
            
            <div class="sidebar-section">
                <h4>‚ÑπÔ∏è Instru√ß√µes de Uso</h4>
                <div class="instructions">
                    <p><strong>1. Localiza√ß√£o e Atividade:</strong> Descreva seu projeto ou selecione manualmente o munic√≠pio e tipo de atividade.</p>
                    <p><strong>2. Configura√ß√µes:</strong> Escolha as esferas legais e defina o n√∫mero m√°ximo de legisla√ß√µes.</p>
                    <p><strong>3. Gera√ß√£o:</strong> Clique em "Gerar Estrutura" ou "Gerar Quadro-Resumo" conforme sua necessidade.</p>
                    <p><strong>4. Download:</strong> Baixe os resultados em Excel ou CSV.</p>
                </div>
            </div>
            
            <div class="sidebar-section">
                <h4>‚ö†Ô∏è Premissas Obrigat√≥rias</h4>
                <div class="premises">
                    <p>‚Ä¢ A IA √© direcionada para legisla√ß√£o ambiental brasileira</p>
                    <p>‚Ä¢ Resultados baseados em fontes oficiais indexadas</p>
                    <p>‚Ä¢ Sempre consulte a legisla√ß√£o original</p>
                    <p>‚Ä¢ Use como ferramenta de apoio, n√£o substituto jur√≠dico</p>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <div class="main-header">
                <h1>üåø Gerador de Tabelas de Legisla√ß√£o Ambiental</h1>
                <p>Ferramenta de IA para cria√ß√£o de tabelas estruturadas de legisla√ß√£o ambiental brasileira</p>
            </div>
            
            <div class="warning-box">
                <i class="fas fa-exclamation-triangle"></i>
                <span>Esta IA √© direcionada especificamente para legisla√ß√£o ambiental brasileira. Os resultados s√£o baseados em fontes oficiais indexadas.</span>
            </div>
            
            <!-- Localiza√ß√£o e Atividade -->
            <div class="section-card">
                <h2>üìç Localiza√ß√£o e Atividade</h2>
                
                <div class="input-method-toggle">
                    <button class="toggle-btn active" data-method="detailed">Comando Detalhado</button>
                    <button class="toggle-btn" data-method="manual">Sele√ß√£o Manual</button>
                </div>
                
                <div class="input-method" id="detailedMethod">
                    <div class="form-group">
                        <label for="projectDescription">Descreva seu projeto em linguagem natural:</label>
                        <textarea id="projectDescription" placeholder="Ex: Constru√ß√£o de uma usina hidrel√©trica no munic√≠pio de Itaipu, Paran√°, para gera√ß√£o de energia el√©trica..." rows="4"></textarea>
                        <div class="input-help">üí° Descreva detalhadamente seu projeto incluindo localiza√ß√£o, tipo de atividade e caracter√≠sticas espec√≠ficas.</div>
                    </div>
                    
                    <div class="extracted-info" id="extractedInfo" style="display: none;">
                        <div class="info-item">
                            <label>Munic√≠pio identificado:</label>
                            <span id="extractedMunicipio">-</span>
                        </div>
                        <div class="info-item">
                            <label>Atividade identificada:</label>
                            <span id="extractedAtividade">-</span>
                        </div>
                    </div>
                </div>
                
                <div class="input-method" id="manualMethod" style="display: none;">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="municipio">Munic√≠pio:</label>
                            <input type="text" id="municipio" placeholder="Digite o munic√≠pio">
                        </div>
                        <div class="form-group">
                            <label for="atividade">Tipo de Atividade:</label>
                            <select id="atividade">
                                <option value="">Selecione uma atividade</option>
                                <option value="mineracao">Minera√ß√£o</option>
                                <option value="energia">Energia</option>
                                <option value="industria">Ind√∫stria</option>
                                <option value="agropecuaria">Agropecu√°ria</option>
                                <option value="infraestrutura">Infraestrutura</option>
                                <option value="turismo">Turismo</option>
                                <option value="residencial">Residencial</option>
                                <option value="comercial">Comercial</option>
                                <option value="outros">Outros</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="descricaoEmpreendimento">Descri√ß√£o adicional do empreendimento (opcional):</label>
                    <textarea id="descricaoEmpreendimento" placeholder="Informa√ß√µes complementares sobre o projeto..." rows="3"></textarea>
                </div>
            </div>
            
            <!-- Configura√ß√µes -->
            <div class="section-card">
                <h2>‚öôÔ∏è Configura√ß√µes</h2>
                
                <div class="form-group">
                    <label>Esferas Legais:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" id="federal" checked>
                            <span class="checkmark"></span>
                            Federal
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" id="estadual" checked>
                            <span class="checkmark"></span>
                            Estadual
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" id="municipal" checked>
                            <span class="checkmark"></span>
                            Municipal
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="maxDocuments">N√∫mero m√°ximo de legisla√ß√µes por esfera:</label>
                    <div class="slider-container">
                        <input type="range" id="maxDocumentsSlider" min="5" max="50" value="20" class="slider">
                        <input type="number" id="maxDocumentsNumber" min="5" max="50" value="20" class="number-input">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="downloadFormat">Formato de download:</label>
                    <select id="downloadFormat">
                        <option value="excel">Excel (.xlsx)</option>
                        <option value="csv">CSV (.csv)</option>
                    </select>
                </div>
            </div>
            
            <!-- Bot√µes de A√ß√£o -->
            <div class="action-buttons">
                <button class="btn btn-primary" id="gerarEstrutura">
                    <i class="fas fa-table"></i>
                    Gerar Estrutura
                </button>
                <button class="btn btn-secondary" id="gerarQuadroResumo">
                    <i class="fas fa-list-alt"></i>
                    Gerar Quadro-Resumo
                </button>
            </div>
            
            <!-- Loading -->
            <div class="loading" id="loading" style="display: none;">
                <div class="loading-spinner"></div>
                <p>Processando sua solicita√ß√£o...</p>
            </div>
            
            <!-- Mensagens -->
            <div class="message success" id="successMessage" style="display: none;">
                <i class="fas fa-check-circle"></i>
                <span id="successText"></span>
            </div>
            
            <div class="message error" id="errorMessage" style="display: none;">
                <i class="fas fa-exclamation-circle"></i>
                <span id="errorText"></span>
            </div>
            
            <!-- Resultados -->
            <div class="results-section" id="resultsSection" style="display: none;">
                <div class="section-card">
                    <h2>üìä Resultados</h2>
                    
                    <div class="table-container">
                        <div id="tableContent"></div>
                    </div>
                    
                    <div class="download-buttons">
                        <button class="btn btn-download" id="downloadExcel">
                            <i class="fas fa-file-excel"></i>
                            Download Excel
                        </button>
                        <button class="btn btn-download" id="downloadCsv">
                            <i class="fas fa-file-csv"></i>
                            Download CSV
                        </button>
                    </div>
                    
                    <div class="stats" id="statsSection" style="display: none;">
                        <h3>üìà Estat√≠sticas do Quadro-Resumo</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">Total de Legisla√ß√µes:</span>
                                <span class="stat-value" id="totalLegislacoes">-</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Federais:</span>
                                <span class="stat-value" id="totalFederais">-</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Estaduais:</span>
                                <span class="stat-value" id="totalEstaduais">-</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Municipais:</span>
                                <span class="stat-value" id="totalMunicipais">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Footer -->
            <div class="footer">
                <p>üåø <strong>Pl√™iade Ambiental</strong> - Ferramenta de IA para Legisla√ß√£o Ambiental | Desenvolvido com tecnologia avan√ßada de processamento de linguagem natural</p>
            </div>
        </div>
    </div>
    
    <script src="/static/js/gerador_tabelas.js"></script>
</body>
</html>